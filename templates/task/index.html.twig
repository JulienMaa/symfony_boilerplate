{% extends 'base.html.twig' %}

{% block title %}Task Index{% endblock %}

{% block body %}

<br>
<a href="{{ path('task_create') }}" class="btn btn-sm button-stylized">Create task</a>
<br>
<div class="row bg-4 mt-4 rounded">
    <div class="card-deck mt-3">
        {% if tasks %}
            {% for task in tasks %}
                <div class="card mb-4 shadow-sm">
                    <div class="card-body">
                        <h5 class="card-title d-flex justify-content-between align-items-center">
                            <span>{{ task.name }} #{{ task.id }}</span>
                            <small class="text-muted">Created: {{ task.getFormattedCreatedAt }}</small>
                        </h5>
                        <p class="card-text">{{ task.description }}</p>
                        
                        <p class="card-text text-muted">Author: {{ task.author.username }}</p>
                        <p class="card-text text-muted">Updated: {{ task.getFormattedUpdatedAt }}</p>
                        
                        <div class="btn-group mt-3">
                            <a href="{{ path('task_view', { id: task.id }) }}" class="btn btn-info" data-toggle="tooltip" title="View Task">
                                <i class="fas fa-eye"></i> View
                            </a>
                            <a href="{{ path('task_edit', { id: task.id }) }}" class="btn btn-primary" data-toggle="tooltip" title="Edit Task">
                                <i class="fas fa-edit"></i> Edit
                            </a>
                            <a href="{{ path('task_delete', { id: task.id }) }}" class="btn btn-danger" data-toggle="tooltip" title="Delete Task" onclick="return confirm('Are you sure you want to delete this task?');">
                                <i class="fas fa-trash-alt"></i> Delete
                            </a>
                        </div>
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <p class="text-center m-2 text-1">No tasks found.</p>
        {% endif %}
    </div>
</div>

<!-- Optional: Include font-awesome icons for buttons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

{% endblock %}
